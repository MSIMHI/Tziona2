{%- comment -%}
  TZ Collection Product Card - RTL-First Theme
  Matches the exact card structure from main-collection-product-grid.liquid
{%- endcomment -%}

{%- liquid
  assign lazy_load = lazy_load | default: false
-%}

<a href="{{ product.url }}" class="tz-collection-product-item">
  <div class="tz-collection-product-image-container">
    {%- if product.available == false -%}
      <span class="tz-collection-product-badge tz-collection-product-badge--out-of-stock">{{ 'products.product.inventory_out_of_stock' | t }}</span>
    {%- elsif product.compare_at_price > product.price -%}
      <span class="tz-collection-product-badge tz-collection-product-badge--sale">{{ 'products.product.on_sale' | t }}</span>
    {%- endif -%}

    {%- if product.featured_image -%}
      <img
        alt="{{ product.featured_image.alt | escape }}"
        class="tz-collection-product-image"
        src="{{ product.featured_image | image_url: width: 600 }}"
        loading="{% if lazy_load %}lazy{% else %}eager{% endif %}"
      >
    {%- endif -%}
  </div>

  <h3 class="tz-collection-product-title">{{ product.title | escape }}</h3>

  <div class="tz-collection-product-price{% if product.compare_at_price > product.price %} tz-collection-product-price--with-sale{% endif %}">
    {%- if product.compare_at_price > product.price -%}
      <span class="tz-collection-product-price-current">{{ product.price | money }}</span>
      <span class="tz-collection-product-price-original">{{ product.compare_at_price | money }}</span>
    {%- else -%}
      {{ product.price | money }}
    {%- endif -%}
  </div>

  {%- comment -%} Color Variants {%- endcomment -%}
  {%- if product.variants.size > 1 -%}
    <div class="tz-collection-product-variants">
      {%- for variant in product.variants limit: 4 -%}
        {%- assign variant_bg = '#6b7280' -%}
        {%- if variant.option1 contains 'שחור' or variant.option1 contains 'black' -%}
          {%- assign variant_bg = '#000000' -%}
        {%- elsif variant.option1 contains 'לבן' or variant.option1 contains 'white' -%}
          {%- assign variant_bg = '#e5e7eb' -%}
        {%- elsif variant.option1 contains 'אפור' or variant.option1 contains 'gray' -%}
          {%- assign variant_bg = '#6b7280' -%}
        {%- elsif variant.option1 contains 'כתום' or variant.option1 contains 'orange' -%}
          {%- assign variant_bg = '#f97316' -%}
        {%- elsif variant.option1 contains 'ירוק' or variant.option1 contains 'green' -%}
          {%- assign variant_bg = '#14532d' -%}
        {%- endif -%}
        <div class="tz-collection-variant-swatch" style="background-color: {{ variant_bg }}"></div>
      {%- endfor -%}
    </div>
  {%- endif -%}
</a>